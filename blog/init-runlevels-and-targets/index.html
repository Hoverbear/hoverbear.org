<!DOCTYPE html>
<html>
    <head>
        <!-- Fun compatability things -->
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0"> <!-- (1) Optimize for mobile versions: http://goo.gl/EOpFl -->
        <meta http-equiv="X-UA-Compatible" content="IE=edge">                  <!-- (1) force latest IE rendering engine: bit.ly/1c8EiC9 -->
        <meta name="HandheldFriendly" content="True" />
        <meta name="MobileOptimized" content="320" />
        <meta name="apple-mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
        <link rel="shortcut icon" href="https:&#x2F;&#x2F;hoverbear.org/images/favicon.ico">
    
        <!-- Information about this site -->
        <title>Init - Runlevels and Targets
        </title>
        <meta name="description" content="A computer scientist working in open source towards a more hopeful future." />
    
        <!-- Various Twitter related content. -->
        <meta name="twitter:card" content="summary_large_image">
        <meta name="twitter:image" content="https:&#x2F;&#x2F;hoverbear.org&#x2F;processed_images&#x2F;bc53a992eae12b8000.jpg"/>
        <meta property='og:image' content="https:&#x2F;&#x2F;hoverbear.org&#x2F;processed_images&#x2F;bc53a992eae12b8000.jpg"/>
        <meta name="twitter:site" content="@a_hoverbear"/>
        <meta name="twitter:creator" content="@a_hoverbear"/>
        
        
            <meta name="twitter:title" content="Init - Runlevels and Targets"/>
            <meta property='og:title' content="Init - Runlevels and Targets"/>
        

        
            <meta property='og:url' content="https:&#x2F;&#x2F;hoverbear.org&#x2F;blog&#x2F;init-runlevels-and-targets&#x2F;"/>
        

        
            <meta name="twitter:description" content="In this post, we&#x27;ll look at how runlevels work in two major init systems, systemd and OpenRC. If you&#x27;re interested in trying out systemd, I&#x27;d suggest using an Arch Linux Live ISO. For those interested in trying OpenRC, check out Funtoo. Both of these will work great in your favorite virtualization solution.
"/>
            <meta property='og:description' content="In this post, we&#x27;ll look at how runlevels work in two major init systems, systemd and OpenRC. If you&#x27;re interested in trying out systemd, I&#x27;d suggest using an Arch Linux Live ISO. For those interested in trying OpenRC, check out Funtoo. Both of these will work great in your favorite virtualization solution.
"/>
        
    
        <!-- Talk about the homepage and the rss feed. -->
        <link rel="canonical" href="https:&#x2F;&#x2F;hoverbear.org">
        <link rel="alternate" type="application/rss+xml" href="https:&#x2F;&#x2F;hoverbear.org/rss.xml">
    
        <!-- Stylesheets are fun -->
        <link rel="preconnect" href="https://fonts.gstatic.com">
        <link href="https://fonts.googleapis.com/css2?family=Architects+Daughter&family=Delius&family=Fira+Code&family=Noto+Sans&display=swap" rel="stylesheet">
        <link rel="stylesheet" type="text/css" media="screen" href="https:&#x2F;&#x2F;hoverbear.org/main.css" />
    
        <!-- Katex -->
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.10.0-rc.1/dist/katex.min.css" integrity="sha384-D+9gmBxUQogRLqvARvNLmA9hS2x//eK1FhVb9PiU86gmcrBrJAQT8okdJ4LMp2uv" crossorigin="anonymous">
        <!-- The loading of KaTeX is deferred to speed up page rendering -->
        <script defer src="https://cdn.jsdelivr.net/npm/katex@0.10.0-rc.1/dist/katex.min.js" integrity="sha384-483A6DwYfKeDa0Q52fJmxFXkcPCFfnXMoXblOkJ4JcA8zATN6Tm78UNL72AKk+0O" crossorigin="anonymous"></script>
        <!-- To automatically render math in text elements, include the auto-render extension: -->
        <script defer src="https://cdn.jsdelivr.net/npm/katex@0.10.0-rc.1/dist/contrib/auto-render.min.js" integrity="sha384-yACMu8JWxKzSp/C1YV86pzGiQ/l1YUfE8oPuahJQxzehAjEt2GiQuy/BIvl9KyeF" crossorigin="anonymous" onload="renderMathInElement(document.body);"></script>
    </head>
    

    <body>
        
    <div id="hero-wrapper">
    <figure class="enriched ">
        <figcaption>Photo&nbsp;- <a href="https://unsplash.com/photos/-N0cgDSF_MI">Kobi Li</a></figcaption>
        
       
       <img srcset="
              https:&#x2F;&#x2F;hoverbear.org&#x2F;processed_images&#x2F;fd9cec75a970c38f00.jpg 1920w,
              https:&#x2F;&#x2F;hoverbear.org&#x2F;processed_images&#x2F;bc53a992eae12b8000.jpg 3840w
              "
              sizes="
                     (max-width: 1200px) 1200px,
                     (max-width: 1800px) 1800px,set 
                     3840px"
              src="https:&#x2F;&#x2F;hoverbear.org&#x2F;processed_images&#x2F;fd9cec75a970c38f00.jpg"
              alt="Photo" />
    </figure>
</div>

    <header>
    <div class="content">
        <h1 id="main-title"><a id="main-link" href="https:&#x2F;&#x2F;hoverbear.org">
            Init - Runlevels and Targets
        </a></h1>

        <nav id="tree"><ul><li>
            <a href="https://hoverbear.org/consulting/">
                Consulting Services
            </a>&nbsp;
        </li><li>
            <a href="https://hoverbear.org/about/">
                Ana, Hoverbear üêª
            </a>&nbsp;
        </li><li>
            <a href="https://hoverbear.org/blog/">
                Articles
            </a>&nbsp;
        </li></ul><ul></ul><ul></ul>
</nav>


        <div class="metadata">
            <h5 class="description">
                    A computer scientist working in open source towards a more hopeful future.
                </h5>

            <p class="date">
                    Posted on 2014-09-29, around 7 minutes of reading.
                </p>
        </div>
    </div>
</header>

    <main>
        
    <nav id=toc>
        <ol>
            
            <li>
                <a href="https://hoverbear.org/blog/init-runlevels-and-targets/#openrc">OpenRC</a>
                
                <ol>
                    
                    <li>
                        <a href="https://hoverbear.org/blog/init-runlevels-and-targets/#benefits">Benefits</a>
                    </li>
                    
                    <li>
                        <a href="https://hoverbear.org/blog/init-runlevels-and-targets/#downfalls">Downfalls</a>
                    </li>
                    
                </ol>
                
            </li>
            
            <li>
                <a href="https://hoverbear.org/blog/init-runlevels-and-targets/#systemd">systemd</a>
                
                <ol>
                    
                    <li>
                        <a href="https://hoverbear.org/blog/init-runlevels-and-targets/#benefits-1">Benefits</a>
                    </li>
                    
                    <li>
                        <a href="https://hoverbear.org/blog/init-runlevels-and-targets/#downfalls-1">Downfalls</a>
                    </li>
                    
                </ol>
                
            </li>
            
            <li>
                <a href="https://hoverbear.org/blog/init-runlevels-and-targets/#further-reading">Further Reading</a>
                
            </li>
            
        </ol>
    </nav>

        <p>In this post, we'll look at how runlevels work in two major init systems, systemd and OpenRC. If you're interested in trying out <code>systemd</code>, I'd suggest using an <a rel="noopener" target="_blank" href="https://www.archlinux.org/download/">Arch Linux Live ISO</a>. For those interested in trying OpenRC, check out <a rel="noopener" target="_blank" href="http://www.funtoo.org/Funtoo_Linux_Installation">Funtoo</a>. Both of these will work great in your favorite virtualization solution.</p>
<span id="continue-reading"></span><h1 id="openrc">OpenRC</h1>
<p>OpenRC uses runlevels in very much the same way as sysvinit (or BSD init). At any given time the system is in one of the defined runlevels, there are three internal runlevels and four user defined runlevels.</p>
<p><strong>Internal Runlevels:</strong></p>
<ul>
<li><code>sysinit</code>: Initialize the system.</li>
<li><code>shutdown</code>: Power off the system.</li>
<li><code>reboot</code>: Rebooting the system.</li>
</ul>
<p><strong>User Runlevels:</strong></p>
<ul>
<li><code>boot</code>: Starts all system-necessary services for other runlevels.
<code>default</code>: Used for day-to-day-operations</li>
<li><code>nonetwork</code>: Used when no network connectivity is required.</li>
<li><code>single</code>: Single-user mode.</li>
</ul>
<p>A system transitions between runlevels like so:</p>
<pre data-lang="bash" class="language-bash z-code"><code class="language-bash" data-lang="bash"><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">sysinit</span></span><span class="z-meta z-function-call z-arguments z-shell"> -<span class="z-keyword z-operator z-assignment z-redirection z-shell">&gt;</span> boot -<span class="z-keyword z-operator z-assignment z-redirection z-shell">&gt;</span> default -<span class="z-keyword z-operator z-assignment z-redirection z-shell">&gt;</span> shutdown</span>
</span></code></pre>
<p>The services controlled by a particular runlevel are controlled by <code>/etc/inittab</code> and via the <code>rc-update</code> command.</p>
<p>On a modern <a rel="noopener" target="_blank" href="http://www.funtoo.org/Funtoo_Hosting">Funtoo LXC Container</a>, your runlevels  might look like this:</p>
<pre data-lang="bash" class="language-bash z-code"><code class="language-bash" data-lang="bash"><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">¬± <span class="z-comment z-line z-number-sign z-shell"><span class="z-punctuation z-definition z-comment z-begin z-shell">#</span></span><span class="z-comment z-line z-number-sign z-shell"> rc-update -v</span><span class="z-comment z-line z-number-sign z-shell">
</span></span></span>             <span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">bootmisc</span></span> <span class="z-keyword z-operator z-logical z-pipe z-shell">|</span> <span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">boot</span></span>
         <span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">busybox-ntpd</span></span> <span class="z-keyword z-operator z-logical z-pipe z-shell">|</span>
     <span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">busybox-watchdog</span></span> <span class="z-keyword z-operator z-logical z-pipe z-shell">|</span>
          <span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">consolefont</span></span> <span class="z-keyword z-operator z-logical z-pipe z-shell">|</span>
                 <span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">dbus</span></span> <span class="z-keyword z-operator z-logical z-pipe z-shell">|</span>
                <span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">devfs</span></span> <span class="z-keyword z-operator z-logical z-pipe z-shell">|</span>                       <span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">sysinit</span></span>
               <span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">dhcpcd</span></span> <span class="z-keyword z-operator z-logical z-pipe z-shell">|</span>
                <span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">dmesg</span></span> <span class="z-keyword z-operator z-logical z-pipe z-shell">|</span>                       <span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">sysinit</span></span>
                 <span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">fsck</span></span> <span class="z-keyword z-operator z-logical z-pipe z-shell">|</span> <span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">boot</span></span>
           <span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">git-daemon</span></span> <span class="z-keyword z-operator z-logical z-pipe z-shell">|</span>
                  <span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">gpm</span></span> <span class="z-keyword z-operator z-logical z-pipe z-shell">|</span>
             <span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">hostname</span></span> <span class="z-keyword z-operator z-logical z-pipe z-shell">|</span> <span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">boot</span></span>
              <span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">hwclock</span></span> <span class="z-keyword z-operator z-logical z-pipe z-shell">|</span> <span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">boot</span></span>
             <span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">iptables</span></span> <span class="z-keyword z-operator z-logical z-pipe z-shell">|</span>      <span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">default</span></span>
              <span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">keymaps</span></span> <span class="z-keyword z-operator z-logical z-pipe z-shell">|</span> <span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">boot</span></span>
            <span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">killprocs</span></span> <span class="z-keyword z-operator z-logical z-pipe z-shell">|</span>              <span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">shutdown</span></span>
    <span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">kmod-static-nodes</span></span> <span class="z-keyword z-operator z-logical z-pipe z-shell">|</span>                       <span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">sysinit</span></span>
<span class="z-meta z-function-call z-shell">                <span class="z-storage z-modifier z-shell">local</span> </span><span class="z-meta z-function-call z-shell"></span><span class="z-keyword z-operator z-logical z-pipe z-shell">|</span>      <span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">default</span></span>
           <span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">localmount</span></span> <span class="z-keyword z-operator z-logical z-pipe z-shell">|</span> <span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">boot</span></span>
              <span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">modules</span></span> <span class="z-keyword z-operator z-logical z-pipe z-shell">|</span> <span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">boot</span></span>
             <span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">mount-ro</span></span> <span class="z-keyword z-operator z-logical z-pipe z-shell">|</span>              <span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">shutdown</span></span>
                 <span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">mtab</span></span> <span class="z-keyword z-operator z-logical z-pipe z-shell">|</span> <span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">boot</span></span>
               <span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">murmur</span></span> <span class="z-keyword z-operator z-logical z-pipe z-shell">|</span>
           <span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">netif.eth0</span></span> <span class="z-keyword z-operator z-logical z-pipe z-shell">|</span>      <span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">default</span></span>
             <span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">netif.lo</span></span> <span class="z-keyword z-operator z-logical z-pipe z-shell">|</span>                       <span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">sysinit</span></span>
           <span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">netif.tmpl</span></span> <span class="z-keyword z-operator z-logical z-pipe z-shell">|</span>
             <span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">netmount</span></span> <span class="z-keyword z-operator z-logical z-pipe z-shell">|</span>      <span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">default</span></span>
                <span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">nginx</span></span> <span class="z-keyword z-operator z-logical z-pipe z-shell">|</span>      <span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">default</span></span>
              <span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">numlock</span></span> <span class="z-keyword z-operator z-logical z-pipe z-shell">|</span>
              <span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">openvpn</span></span> <span class="z-keyword z-operator z-logical z-pipe z-shell">|</span>      <span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">default</span></span>
              <span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">pciparm</span></span> <span class="z-keyword z-operator z-logical z-pipe z-shell">|</span>
              <span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">postfix</span></span> <span class="z-keyword z-operator z-logical z-pipe z-shell">|</span>
               <span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">procfs</span></span> <span class="z-keyword z-operator z-logical z-pipe z-shell">|</span> <span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">boot</span></span>
            <span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">pydoc-2.7</span></span> <span class="z-keyword z-operator z-logical z-pipe z-shell">|</span>
            <span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">pydoc-3.3</span></span> <span class="z-keyword z-operator z-logical z-pipe z-shell">|</span>
            <span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">pydoc-3.4</span></span> <span class="z-keyword z-operator z-logical z-pipe z-shell">|</span>
                <span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">redis</span></span> <span class="z-keyword z-operator z-logical z-pipe z-shell">|</span>
                 <span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">root</span></span> <span class="z-keyword z-operator z-logical z-pipe z-shell">|</span> <span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">boot</span></span>
               <span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">rsyncd</span></span> <span class="z-keyword z-operator z-logical z-pipe z-shell">|</span>
            <span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">savecache</span></span> <span class="z-keyword z-operator z-logical z-pipe z-shell">|</span>              <span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">shutdown</span></span>
                 <span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">sshd</span></span> <span class="z-keyword z-operator z-logical z-pipe z-shell">|</span>      <span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">default</span></span>
                 <span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">swap</span></span> <span class="z-keyword z-operator z-logical z-pipe z-shell">|</span> <span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">boot</span></span>
            <span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">swapfiles</span></span> <span class="z-keyword z-operator z-logical z-pipe z-shell">|</span> <span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">boot</span></span>
              <span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">swclock</span></span> <span class="z-keyword z-operator z-logical z-pipe z-shell">|</span>
               <span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">sysctl</span></span> <span class="z-keyword z-operator z-logical z-pipe z-shell">|</span> <span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">boot</span></span>
                <span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">sysfs</span></span> <span class="z-keyword z-operator z-logical z-pipe z-shell">|</span>                       <span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">sysinit</span></span>
         <span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">termencoding</span></span> <span class="z-keyword z-operator z-logical z-pipe z-shell">|</span> <span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">boot</span></span>
         <span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">tmpfiles.dev</span></span> <span class="z-keyword z-operator z-logical z-pipe z-shell">|</span>                       <span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">sysinit</span></span>
       <span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">tmpfiles.setup</span></span> <span class="z-keyword z-operator z-logical z-pipe z-shell">|</span> <span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">boot</span></span>
                 <span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">udev</span></span> <span class="z-keyword z-operator z-logical z-pipe z-shell">|</span>                       <span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">sysinit</span></span>
           <span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">udev-mount</span></span> <span class="z-keyword z-operator z-logical z-pipe z-shell">|</span>                       <span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">sysinit</span></span>
       <span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">udev-postmount</span></span> <span class="z-keyword z-operator z-logical z-pipe z-shell">|</span> <span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">boot</span></span>
              <span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">urandom</span></span> <span class="z-keyword z-operator z-logical z-pipe z-shell">|</span> <span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">boot</span></span>
</span></code></pre>
<p>Services can be added to runlevels with:</p>
<pre data-lang="bash" class="language-bash z-code"><code class="language-bash" data-lang="bash"><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">rc-update</span></span><span class="z-meta z-function-call z-arguments z-shell"> add <span class="z-keyword z-operator z-assignment z-redirection z-shell">&lt;</span>service<span class="z-keyword z-operator z-assignment z-redirection z-shell">&gt;</span> <span class="z-keyword z-operator z-assignment z-redirection z-shell">&lt;</span>runlevel<span class="z-keyword z-operator z-assignment z-redirection z-shell">&gt;</span>
</span></span></code></pre>
<p>Or removed with:</p>
<pre data-lang="bash" class="language-bash z-code"><code class="language-bash" data-lang="bash"><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">rc-update</span></span><span class="z-meta z-function-call z-arguments z-shell"> del <span class="z-keyword z-operator z-assignment z-redirection z-shell">&lt;</span>service<span class="z-keyword z-operator z-assignment z-redirection z-shell">&gt;</span> <span class="z-keyword z-operator z-assignment z-redirection z-shell">&lt;</span>runlevel<span class="z-keyword z-operator z-assignment z-redirection z-shell">&gt;</span>
</span></span></code></pre>
<p>Changing between runlevels is done via the <code>rc &lt;runlevel&gt;</code> command, but most users will never need to do this as runlevels are (mostly) managed by the system.</p>
<p>In the case where a user does want to change runlevels in this way, it is often such that they are utilizing <a rel="noopener" target="_blank" href="http://www.funtoo.org/Stacked_Runlevels">Stacked Runlevels</a>.</p>
<p>For example, if a user wanted to differentiate which services were running on their laptop when it was powered or on battery, they could create two separate runlevels stacked atop <code>default</code>. While plugged in, the laptop could be running test databases or any number of services, but after changing runlevels these services could be disabled to save on battery.</p>
<h4 id="benefits">Benefits</h4>
<ul>
<li><strong>Simple:</strong> There are (normally) only 7 runlevels, and for most of it's time the system remains on the <code>default</code> runlevel.</li>
<li><strong>Established:</strong>  <code>init</code> and <code>sysvinit</code> have been using runlevels for ages.</li>
<li><strong>Sufficient:</strong> Runlevels have been shown to provide sufficient functionality for most applications.</li>
</ul>
<h4 id="downfalls">Downfalls</h4>
<ul>
<li><strong>Inflexible:</strong> While there are ways to create 'Stacked Runlevels', the system is not very capable of more exotic requirements.</li>
<li><strong>Aging:</strong> Modern systems, especially desktops and laptops, frequently change their hardware (inserting a USB stick), or network settings (Changing between WiFi networks), steps have been taken by system designers to handle these stumbling blocks, but it's not longer always sufficient to scan once for hardware, for example.</li>
</ul>
<h1 id="systemd">systemd</h1>
<p><code>systemd</code> uses targets instead of runlevels. Each target has a unique name, and multiple targets can be active at one time. Since most distributions using systemd have migrated from a runlevel based init system, there are targets which roughly correspond to the runlevels used by OpenRC, <code>init</code>, and <code>sysvinit</code>.</p>
<ul>
<li><code>poweroff</code>: Halt the system.</li>
<li><code>rescue</code>: Single user mode.</li>
<li><code>multi-user</code>: Multi-user, non-graphical. User-defined/Site-specific runlevels.</li>
<li><code>graphical</code>: Multi-user, graphical. Usually multi-user + graphical login.</li>
<li><code>reboot</code>: Reboot</li>
<li><code>emergency</code>: Emergency Shell</li>
</ul>
<p>It's important to understand that these are not necessarily the only active targets. In the case of the <code>graphical</code> target, a display manager service like <code>kdm</code> might be started, this target would also activate the <code>multi-user</code> target.</p>
<p>The <code>multi-user</code> target might also activate a service like <code>dbus</code>, and another target named <code>basic</code>. This is interesting because it allows us to cleanly compose and extend the system to suit our needs.</p>
<p>A <code>.target</code> file resides in <code>/usr/lib/systemd/system</code> or <code>/usr/lib/systemd/system/</code> and looks like this:</p>
<pre class="z-code"><code><span class="z-text z-plain">[Unit]
Description=Graphical Interface
Documentation=man:systemd.special(7)
Requires=multi-user.target
After=multi-user.target
Conflicts=rescue.target
Wants=display-manager.service
AllowIsolate=yes
</span></code></pre>
<p>This file would be accompanied by a <code>&lt;target&gt;.wants</code> directory containing the services it should enable.</p>
<p>Targets can be controlled very similar to systemd's <code>.service</code> unit files, you just need to add <code>.target</code> at the end.</p>
<pre data-lang="bash" class="language-bash z-code"><code class="language-bash" data-lang="bash"><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">systemctl</span></span><span class="z-meta z-function-call z-arguments z-shell"> status graphical.target</span>
<span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">¬±</span></span><span class="z-meta z-function-call z-arguments z-shell"> <span class="z-meta z-group z-expansion z-job z-shell"><span class="z-punctuation z-definition z-variable z-job z-shell">%</span></span> systemctl status graphical.target</span>
<span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">graphical.target</span></span><span class="z-meta z-function-call z-arguments z-shell"> - Graphical Interface</span>
<span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">Loaded:</span></span><span class="z-meta z-function-call z-arguments z-shell"> loaded (/lib/systemd/system/graphical.target</span><span class="z-keyword z-operator z-logical z-continue z-shell">;</span> <span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">enabled</span></span><span class="z-meta z-function-call z-shell"></span>)
<span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">Active:</span></span><span class="z-meta z-function-call z-arguments z-shell"> active since Thu 2014-09-25 21:21:26 PDT</span><span class="z-keyword z-operator z-logical z-continue z-shell">;</span> <span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">4</span></span><span class="z-meta z-function-call z-arguments z-shell"> days ago</span>
<span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">Docs:</span></span><span class="z-meta z-function-call z-arguments z-shell"> man:systemd.special(7</span><span class="z-meta z-function-call z-shell"></span>)

 <span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">Sep</span></span><span class="z-meta z-function-call z-arguments z-shell"> 25 21:21:26 aluminum systemd<span class="z-keyword z-control z-regexp z-set z-begin z-shell">[</span>1<span class="z-keyword z-control z-regexp z-set z-end z-shell">]</span>: Starting Graphical Interface.</span>
 <span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">Sep</span></span><span class="z-meta z-function-call z-arguments z-shell"> 25 21:21:26 aluminum systemd<span class="z-keyword z-control z-regexp z-set z-begin z-shell">[</span>1<span class="z-keyword z-control z-regexp z-set z-end z-shell">]</span>: Reached target Graphical Interface.</span>
</span></code></pre>
<p>The <code>.target</code> based approach allows for various services to be grouped in a logical manner. For example, is is the state of targets on a modern Fedora Desktop:</p>
<pre data-lang="bash" class="language-bash z-code"><code class="language-bash" data-lang="bash"><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">¬±</span></span><span class="z-meta z-function-call z-arguments z-shell"> <span class="z-meta z-group z-expansion z-job z-shell"><span class="z-punctuation z-definition z-variable z-job z-shell">%</span></span> systemctl list-units<span class="z-variable z-parameter z-option z-shell"><span class="z-punctuation z-definition z-parameter z-shell"> --</span>type</span><span class="z-keyword z-operator z-assignment z-option z-shell">=</span>target<span class="z-variable z-parameter z-option z-shell"><span class="z-punctuation z-definition z-parameter z-shell"> --</span>all</span></span>
<span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">UNIT</span></span><span class="z-meta z-function-call z-arguments z-shell">                   LOAD      ACTIVE   SUB    DESCRIPTION</span>
<span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">basic.target</span></span><span class="z-meta z-function-call z-arguments z-shell">           loaded    active   active Basic System</span>
<span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">bluetooth.target</span></span><span class="z-meta z-function-call z-arguments z-shell">       loaded    active   active Bluetooth</span>
<span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">cryptsetup-pre.target</span></span><span class="z-meta z-function-call z-arguments z-shell">  loaded    inactive dead   Encrypted Volumes (Pre</span><span class="z-meta z-function-call z-shell"></span>)
<span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">cryptsetup.target</span></span><span class="z-meta z-function-call z-arguments z-shell">      loaded    active   active Encrypted Volumes</span>
<span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">emergency.target</span></span><span class="z-meta z-function-call z-arguments z-shell">       loaded    inactive dead   Emergency Mode</span>
<span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">final.target</span></span><span class="z-meta z-function-call z-arguments z-shell">           loaded    inactive dead   Final Step</span>
<span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">getty.target</span></span><span class="z-meta z-function-call z-arguments z-shell">           loaded    active   active Login Prompts</span>
<span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">graphical.target</span></span><span class="z-meta z-function-call z-arguments z-shell">       loaded    active   active Graphical Interface</span>
<span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">local-fs-pre.target</span></span><span class="z-meta z-function-call z-arguments z-shell">    loaded    active   active Local File Systems (Pre</span><span class="z-meta z-function-call z-shell"></span>)
<span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">local-fs.target</span></span><span class="z-meta z-function-call z-arguments z-shell">        loaded    active   active Local File Systems</span>
<span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">multi-user.target</span></span><span class="z-meta z-function-call z-arguments z-shell">      loaded    active   active Multi-User System</span>
<span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">network-online.target</span></span><span class="z-meta z-function-call z-arguments z-shell">  loaded    inactive dead   Network is Online</span>
<span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">network.target</span></span><span class="z-meta z-function-call z-arguments z-shell">         loaded    active   active Network</span>
<span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">nfs.target</span></span><span class="z-meta z-function-call z-arguments z-shell">             loaded    active   active Network File System Server</span>
<span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">nss-user-lookup.target</span></span><span class="z-meta z-function-call z-arguments z-shell"> loaded    inactive dead   User and Group Name Lookups</span>
<span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">paths.target</span></span><span class="z-meta z-function-call z-arguments z-shell">           loaded    active   active Paths</span>
<span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">remote-fs-pre.target</span></span><span class="z-meta z-function-call z-arguments z-shell">   loaded    inactive dead   Remote File Systems (Pre</span><span class="z-meta z-function-call z-shell"></span>)
<span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">remote-fs.target</span></span><span class="z-meta z-function-call z-arguments z-shell">       loaded    active   active Remote File Systems</span>
<span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">rescue.target</span></span><span class="z-meta z-function-call z-arguments z-shell">          loaded    inactive dead   Rescue Mode</span>
<span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">shutdown.target</span></span><span class="z-meta z-function-call z-arguments z-shell">        loaded    inactive dead   Shutdown</span>
<span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">sleep.target</span></span><span class="z-meta z-function-call z-arguments z-shell">           loaded    inactive dead   Sleep</span>
<span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">slices.target</span></span><span class="z-meta z-function-call z-arguments z-shell">          loaded    active   active Slices</span>
<span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">sockets.target</span></span><span class="z-meta z-function-call z-arguments z-shell">         loaded    active   active Sockets</span>
<span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">sound.target</span></span><span class="z-meta z-function-call z-arguments z-shell">           loaded    active   active Sound Card</span>
<span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">suspend.target</span></span><span class="z-meta z-function-call z-arguments z-shell">         loaded    active   active Suspend</span>
<span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">swap.target</span></span><span class="z-meta z-function-call z-arguments z-shell">            loaded    active   active Swap</span>
<span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">sysinit.target</span></span><span class="z-meta z-function-call z-arguments z-shell">         loaded    active   active System Initialization</span>
<span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">syslog.target</span></span><span class="z-meta z-function-call z-arguments z-shell">          not-found inactive dead   syslog.target</span>
<span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">time-sync.target</span></span><span class="z-meta z-function-call z-arguments z-shell">       loaded    inactive dead   System Time Synchronized</span>
<span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">timers.target</span></span><span class="z-meta z-function-call z-arguments z-shell">          loaded    active   active Timers</span>
<span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">umount.target</span></span><span class="z-meta z-function-call z-arguments z-shell">          loaded    inactive dead   Unmount All Filesystems</span>

<span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">LOAD</span></span><span class="z-meta z-function-call z-arguments z-shell">   = Reflects whether the unit definition was properly loaded.</span>
<span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">ACTIVE</span></span><span class="z-meta z-function-call z-arguments z-shell"> = The high-level unit activation state, i.e. generalization of SUB.</span>
<span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">SUB</span></span><span class="z-meta z-function-call z-arguments z-shell">    = The low-level unit activation state, values depend on unit type.</span>

<span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">31</span></span><span class="z-meta z-function-call z-arguments z-shell"> loaded units listed.</span>
<span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">To</span></span><span class="z-meta z-function-call z-arguments z-shell"> show all installed unit files use <span class="z-string z-quoted z-single z-shell"><span class="z-punctuation z-definition z-string z-begin z-shell">&#39;</span>systemctl list-unit-files<span class="z-punctuation z-definition z-string z-end z-shell">&#39;</span></span>.</span>
</span></code></pre>
<h4 id="benefits-1">Benefits</h4>
<ul>
<li><strong>Composition</strong>: Allows for services to be composed together in logical, user-defined groups easily.</li>
<li><strong>Configuration</strong>: It's simple to add custom targets.</li>
<li><strong>Less Restrictive</strong>: Since multiple targets can be active at a given time, the system's behavior can be more finely defined.</li>
</ul>
<h4 id="downfalls-1">Downfalls</h4>
<ul>
<li><strong>Complexity</strong>: A sufficiently sophisticated installation could be composed of dozens of targets, and can require a deeper understanding of the system.</li>
</ul>
<h1 id="further-reading">Further Reading</h1>
<ul>
<li><a rel="noopener" target="_blank" href="http://0pointer.de/blog/projects/systemd.html">Rethinking PID 1</a></li>
<li><a rel="noopener" target="_blank" href="https://access.redhat.com/documentation/en-US/Red_Hat_Enterprise_Linux/7/html/System_Administrators_Guide/sect-Managing_Services_with_systemd-Targets.html">Red Hat: Working with systemd Targets</a></li>
<li><a rel="noopener" target="_blank" href="http://www.freedesktop.org/software/systemd/man/systemd.target.html">Systemd Target</a></li>
<li><a rel="noopener" target="_blank" href="http://0pointer.de/blog/projects/systemd-update.html">Systemd status update 1</a></li>
<li><a rel="noopener" target="_blank" href="http://0pointer.de/blog/projects/systemd-update-2.html">Systemd status update 2</a></li>
<li><a rel="noopener" target="_blank" href="http://0pointer.de/blog/projects/systemd-update-3.html">Systemd status update 3</a></li>
<li><a rel="noopener" target="_blank" href="http://wiki.gentoo.org/wiki/Comparison_of_init_systems">Comparison of init Systems</a></li>
<li><a rel="noopener" target="_blank" href="http://skarnet.org/software/s6/why.html">s6 why?</a></li>
<li><a rel="noopener" target="_blank" href="https://www.gentoo.org/doc/en/handbook/handbook-x86.xml?part=2&amp;chap=4#doc_chap5">Initscripts (Gentoo Handbook)</a></li>
<li><a rel="noopener" target="_blank" href="http://www.funtoo.org/Stacked_Runlevels">Stacked Rulevels (Funtoo Wiki)</a></li>
</ul>

    </main>
    <footer class="post-footer">
    Connect through &nbsp<a href="mailto:operator@hoverbear.org">operator@hoverbear.org</a>,&nbsp;<a href="https://github.com/hoverbear">@hoverbear</a> on Github,&nbsp;<a href="https://twitter.com/a_hoverbear">@a_hoverbear</a> on Twitter,</a>&nbsp;
    or track via <a class="subscribe" href="https:&#x2F;&#x2F;hoverbear.org/rss.xml">RSS Feed</a>.
</footer>
<pre class="artifact"><a id="commit" href="https://github.com/Hoverbear/hoverbear.org/commit/45a5e9a4ee2f176ef9d6117636437ef7a83a415a
">45a5e9a4ee2f176ef9d6117636437ef7a83a415a
</a></pre>
    </body>

</html>
